ifeq "$(findstring Windows, $(OS))" "Windows"
DYNLIB := lib/libshared.dll
else # UNIX/Linux
DYNLIB := lib/libshared.so
endif

CFLAGS := -fPIC
objects := foo.o shared.o

.c.o:
	gcc -c -fPIC $<

all: $(DYNLIB) install

clean:
	rm -f $(objects) $(DYNLIB)

install: $(DYNLIB)
	sudo cp $(DYNLIB) /lib 


$(DYNLIB): $(objects)
	gcc -shared -o $(DYNLIB) $(objects)
